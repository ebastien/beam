export JAVA_OPTS="-Xmx8g -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8"

./gradlew --no-daemon --no-parallel --stacktrace \
  :beam-examples-java:publish \
  :beam-model-fn-execution:publish \
  :beam-model-job-management:publish \
  :beam-model-pipeline:publish \
  :beam-runners-core-construction-java:publish \
  :beam-runners-core-java:publish \
  :beam-runners-direct-java:publish \
  :beam-runners-extensions-java-metrics:publish \
  :beam-runners-flink_2.11:publish \
  :beam-runners-flink_2.11-job-server:publish \
  :beam-runners-java-fn-execution:publish \
  :beam-runners-local-java-core:publish \
  :beam-runners-reference-java:publish \
  :beam-sdks-java-build-tools:publish \
  :beam-sdks-java-core:publish \
  :beam-sdks-java-extensions-google-cloud-platform-core:publish \
  :beam-sdks-java-extensions-json-jackson:publish \
  :beam-sdks-java-extensions-join-library:publish \
  :beam-sdks-java-extensions-protobuf:publish \
  :beam-sdks-java-extensions-sketching:publish \
  :beam-sdks-java-extensions-sorter:publish \
  :beam-sdks-java-extensions-sql:publish \
  :beam-sdks-java-extensions-sql-jdbc:publish \
  :beam-sdks-java-fn-execution:publish \
  :beam-sdks-java-harness:publish \
  :beam-sdks-java-io-amazon-web-services:publish \
  :beam-sdks-java-io-amqp:publish \
  :beam-sdks-java-io-cassandra:publish \
  :beam-sdks-java-io-common:publish \
  :beam-sdks-java-io-elasticsearch:publish \
  :beam-sdks-java-io-elasticsearch-tests-2:publish \
  :beam-sdks-java-io-elasticsearch-tests-5:publish \
  :beam-sdks-java-io-elasticsearch-tests-6:publish \
  :beam-sdks-java-io-elasticsearch-tests-common:publish \
  :beam-sdks-java-io-file-based-io-tests:publish \
  :beam-sdks-java-io-google-cloud-platform:publish \
  :beam-sdks-java-io-hadoop-common:publish \
  :beam-sdks-java-io-hadoop-file-system:publish \
  :beam-sdks-java-io-hadoop-input-format:publish \
  :beam-sdks-java-io-hbase:publish \
  :beam-sdks-java-io-hcatalog:publish \
  :beam-sdks-java-io-jdbc:publish \
  :beam-sdks-java-io-jms:publish \
  :beam-sdks-java-io-kafka:publish \
  :beam-sdks-java-io-kinesis:publish \
  :beam-sdks-java-io-kudu:publish \
  :beam-sdks-java-io-mongodb:publish \
  :beam-sdks-java-io-mqtt:publish \
  :beam-sdks-java-io-parquet:publish \
  :beam-sdks-java-io-redis:publish \
  :beam-sdks-java-io-solr:publish \
  :beam-sdks-java-io-tika:publish \
  :beam-sdks-java-io-xml:publish \
  :beam-sdks-java-io-synthetic:publish \
  :beam-sdks-java-nexmark:publish \
  :beam-vendor-sdks-java-extensions-protobuf:publish \
  -Ppublishing -PnoSign -PdistMgmtSnapshotsUrl="file://${HOME}/maven" -PdistMgmtServerId=snapshots --no-parallel --no-daemon --continue
